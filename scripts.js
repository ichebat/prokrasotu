(function(){var x={},u="";try{u=location.hash.toString()}catch{}var W=J(u),Q=$("initParams");if(Q)for(var a in Q)typeof W[a]>"u"&&(W[a]=Q[a]);pe("initParams",W);var U=!1,q;try{if(U=window.parent!=null&&window!=window.parent,U){window.addEventListener("message",function(s){if(s.source===window.parent){try{var p=JSON.parse(s.data)}catch{return}if(!(!p||!p.eventType))if(p.eventType=="set_custom_style")s.origin==="https://web.telegram.org"&&(q.innerHTML=p.eventData);else if(p.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else I(p.eventType,p.eventData)}}),q=document.createElement("style"),document.head.appendChild(q);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function y(s){try{return s=s.replace(/\+/g,"%20"),decodeURIComponent(s)}catch{return s}}function J(s){s=s.replace(/^#/,"");var p={};if(!s.length)return p;if(s.indexOf("=")<0&&s.indexOf("?")<0)return p._path=y(s),p;var f=s.indexOf("?");if(f>=0){var w=s.substr(0,f);p._path=y(w),s=s.substr(f+1)}var B=_(s);for(var k in B)p[k]=B[k];return p}function _(s){var p={};if(!s.length)return p;var f=s.split("&"),w,B,k,F;for(w=0;w<f.length;w++)B=f[w].split("="),k=y(B[0]),F=B[1]==null?null:y(B[1]),p[k]=F;return p}function se(s,p){var f=s.indexOf("#");if(f<0)return s+"#"+p;var w=s.substr(f+1);return w.indexOf("=")>=0||w.indexOf("?")>=0?s+"&"+p:w.length>0?s+"?"+p:s+p}function le(s,p,f){if(p||(p=function(){}),f===void 0&&(f=""),console.log("[Telegram.WebView] > postEvent",s,f),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(s,JSON.stringify(f)),p();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:s,eventData:f})),p();else if(U)try{var w="https://web.telegram.org";w="*",window.parent.postMessage(JSON.stringify({eventType:s,eventData:f}),w),p()}catch(B){p(B)}else p({notAvailable:!0})}function I(s,p){console.log("[Telegram.WebView] < receiveEvent",s,p),ue(s,function(f){f(s,p)})}function ue(s,p){var f=x[s];if(!(f===void 0||!f.length))for(var w=0;w<f.length;w++)try{p(f[w])}catch{}}function L(s,p){x[s]===void 0&&(x[s]=[]),x[s]=[p]}function fe(s,p){if(x[s]!==void 0){var f=x[s].indexOf(p);f!==-1&&x[s].splice(f,1)}}function de(s){if(!s.match(/^(web\+)?tgb?:\/\/./))return!1;var p=!!navigator.userAgent.match(/iOS|iPhone OS|iPhone|iPod|iPad/i);if(p){var f=document.getElementById("tgme_frame_cont")||document.body,w=document.createElement("iframe");f.appendChild(w);var B=!1,k=function(){B=!0};window.addEventListener("pagehide",k,!1),window.addEventListener("blur",k,!1),w!==null&&(w.src=s),setTimeout(function(){B||(window.location=s),window.removeEventListener("pagehide",k,!1),window.removeEventListener("blur",k,!1)},2e3)}else window.location=s;return!0}function pe(s,p){try{return window.sessionStorage.setItem("__telegram__"+s,JSON.stringify(p)),!0}catch{}return!1}function $(s){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+s))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:W,isIframe:U,onEvent:L,offEvent:fe,postEvent:le,receiveEvent:I,callEventCallbacks:ue},window.Telegram.Utils={urlSafeDecode:y,urlParseQueryString:_,urlParseHashParams:J,urlAppendHashParams:se,sessionStorageSet:pe,sessionStorageGet:$},window.TelegramGameProxy_receiveEvent=I,window.TelegramGameProxy={receiveEvent:I}})(),function(){var x=window.Telegram.Utils,u=window.Telegram.WebView,W=u.initParams,Q=u.isIframe,a={},U="",q={},y={},J="light",_="7.7",se="unknown";if(W.tgWebAppData&&W.tgWebAppData.length){U=W.tgWebAppData,q=x.urlParseQueryString(U);for(var le in q){var I=q[le];try{(I.substr(0,1)=="{"&&I.substr(-1)=="}"||I.substr(0,1)=="["&&I.substr(-1)=="]")&&(q[le]=JSON.parse(I))}catch{}}}if(W.tgWebAppThemeParams&&W.tgWebAppThemeParams.length){var ue=W.tgWebAppThemeParams;try{var L=JSON.parse(ue);L&&F(L)}catch{}}var L=x.sessionStorageGet("themeParams");L&&F(L),W.tgWebAppVersion&&(_=W.tgWebAppVersion),W.tgWebAppPlatform&&(se=W.tgWebAppPlatform);function fe(e,t){t.theme_params&&(F(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),he(),_e(),we(),f("themeChanged"))}var de=window.innerHeight;function pe(e,t){t.height&&(window.removeEventListener("resize",$),be(t))}function $(e){de!=window.innerHeight&&(de=window.innerHeight,f("viewportChanged",{isStateStable:!0}))}function s(e){if(!(e.metaKey||e.ctrlKey)){for(var t=e.target;t.tagName!="A"&&t.parentNode;)t=t.parentNode;t.tagName=="A"&&t.target!="_blank"&&(t.protocol=="http:"||t.protocol=="https:")&&t.hostname=="t.me"&&(a.openTgLink(t.href),e.preventDefault())}}function p(e){return e.toString().replace(/^\s+|\s+$/g,"")}function f(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),u.callEventCallbacks("webview:"+e,function(r){r.apply(a,t)})}function w(e,t){u.onEvent("webview:"+e,t)}function B(e,t){u.offEvent("webview:"+e,t)}function k(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function F(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");var t;for(var r in e)(t=G(e[r]))&&(y[r]=t,r=="bg_color"&&(J=Fe(t)?"dark":"light",k("color-scheme",J)),r="theme-"+r.split("_").join("-"),k(r,t));x.sessionStorageSet("themeParams",y)}var O={};function Ee(e){for(var t=100;--t;){for(var r="",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=o.length,b=0;b<e;b++)r+=o[Math.floor(Math.random()*n)];if(!O[r])return O[r]={},r}throw Error("WebAppCallbackIdGenerateFailed")}var X=!1,Z=!1,Te=!0;function be(e){typeof e<"u"&&(Te=!!e.is_expanded,X=e.height,e.is_state_stable&&(Z=e.height),f("viewportChanged",{isStateStable:!!e.is_state_stable}));var t,r;X!==!1?t=X-C+"px":t=C?"calc(100vh - "+C+"px)":"100vh",Z!==!1?r=Z-C+"px":r=C?"calc(100vh - "+C+"px)":"100vh",k("viewport-height",t),k("viewport-stable-height",r)}var ge=!1;function Ne(e){if(!v("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+_);return}ge=!!e,u.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:ge})}var ve=!0;function Ve(e){if(!v("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+_);return}ve=!!e,u.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:ve})}var z="bg_color",Y=null;function Le(){return z=="secondary_bg_color"?y.secondary_bg_color:z=="bg_color"?y.bg_color:Y}function He(e){if(!v("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+_);return}v("6.9")||(y.bg_color&&y.bg_color==e?e="bg_color":y.secondary_bg_color&&y.secondary_bg_color==e&&(e="secondary_bg_color"));var t=null,r=null;if(e=="bg_color"||e=="secondary_bg_color")r=e;else if(v("6.9")&&(t=G(e),!t))throw console.error("[Telegram.WebApp] Header color format is invalid",e),Error("WebAppHeaderColorInvalid");if(!v("6.9")&&r!="bg_color"&&r!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");z=r,Y=t,he()}var Pe=null,me=null;function he(){(Pe!=z||me!=Y)&&(Pe=z,me=Y,me?u.postEvent("web_app_set_header_color",!1,{color:Y}):u.postEvent("web_app_set_header_color",!1,{color_key:z}))}var ce="bg_color";function Be(){return ce=="secondary_bg_color"?y.secondary_bg_color:ce=="bg_color"?y.bg_color:ce}function Qe(e){if(!v("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+_);return}var t;if(e=="bg_color"||e=="secondary_bg_color")t=e;else if(t=G(e),!t)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");ce=t,_e()}var ke=null;function _e(){var e=Be();ke!=e&&(ke=e,u.postEvent("web_app_set_background_color",!1,{color:e}))}var D="bottom_bar_bg_color";function ee(){return D=="bottom_bar_bg_color"?y.bottom_bar_bg_color||y.secondary_bg_color||"#ffffff":D=="secondary_bg_color"?y.secondary_bg_color:D=="bg_color"?y.bg_color:D}function Je(e){if(!v("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+_);return}var t;if(e=="bg_color"||e=="secondary_bg_color"||e=="bottom_bar_bg_color")t=e;else if(t=G(e),!t)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",e),Error("WebAppBottomBarColorInvalid");D=t,we(),window.Telegram.WebApp.SecondaryButton.setParams({})}var Ce=null;function we(){var e=ee();Ce!=e&&(Ce=e,u.postEvent("web_app_set_bottom_bar_color",!1,{color:e})),W.tgWebAppDebug&&Oe()}function G(e){e+="";var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),o=parseInt(t[2]),n=parseInt(t[3]);return r=(r<16?"0":"")+r.toString(16),o=(o<16?"0":"")+o.toString(16),n=(n<16?"0":"")+n.toString(16),"#"+r+o+n}return!1}function Fe(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),n=Math.sqrt(.299*(t*t)+.587*(r*r)+.114*(o*o));return n<120}function ze(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var r=Math.max(e.length,t.length),o,n,b;for(o=0;o<r;o++)if(n=parseInt(e[o])||0,b=parseInt(t[o])||0,n!=b)return n>b?1:-1;return 0}function v(e){return ze(_,e)>=0}function Ge(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,r=e.length-1;r>=0;r--){var o=e.charCodeAt(r);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&r--}return t}var Ke=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(c){h({is_visible:c})},get:function(){return e},enumerable:!0});var r=null;u.onEvent("back_button_pressed",o);function o(){f("backButtonClicked")}function n(){return{is_visible:e}}function b(c){return typeof c>"u"&&(c=n()),JSON.stringify(c)}function m(){return v("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+_),!1)}function d(){var c=n(),T=b(c);r!==T&&(r=T,u.postEvent("web_app_setup_back_button",!1,c))}function h(c){return m()&&(typeof c.is_visible<"u"&&(e=!!c.is_visible),d()),t}return t.onClick=function(c){return m()&&w("backButtonClicked",c),t},t.offClick=function(c){return m()&&B("backButtonClicked",c),t},t.show=function(){return h({is_visible:!0})},t.hide=function(){return h({is_visible:!1})},t}(),S=null,ye={},C=0;if(W.tgWebAppDebug){S=document.createElement("tg-bottom-bar");var xe={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:ee(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var Se in xe)S.style[Se]=xe[Se];document.addEventListener("DOMContentLoaded",function e(t){document.removeEventListener("DOMContentLoaded",e),document.body.appendChild(S)});var Ie=document.createElement("style");Ie.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',S.appendChild(Ie)}function Oe(){var e=ye.main._bottomButton,t=ye.secondary._bottomButton;e.isVisible||t.isVisible?(S.style.display="flex",C=58,e.isVisible&&t.isVisible&&(t.position=="top"?(S.style.flexDirection="column-reverse",C+=51):t.position=="bottom"?(S.style.flexDirection="column",C+=51):t.position=="left"?S.style.flexDirection="row-reverse":t.position=="right"&&(S.style.flexDirection="row"))):(S.style.display="none",C=0),S.style.background=ee(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=C+"px"),be()}var qe=function(e){var t=e=="main";if(t)var r="web_app_setup_main_button",o="main_button_pressed",n="mainButtonClicked",b="Continue",m=function(){return y.button_color||"#2481cc"},d=function(){return y.button_text_color||"#ffffff"};else var r="web_app_setup_secondary_button",o="secondary_button_pressed",n="secondaryButtonClicked",b="Cancel",m=function(){return ee()},d=function(){return y.button_color||"#2481cc"};var h=!1,c=!0,T=!1,A=!1,M=e,ie=b,ae=!1,j=!1,N="left",l={};Object.defineProperty(l,"type",{get:function(){return M},enumerable:!0}),Object.defineProperty(l,"text",{set:function(i){l.setParams({text:i})},get:function(){return ie},enumerable:!0}),Object.defineProperty(l,"color",{set:function(i){l.setParams({color:i})},get:function(){return ae||m()},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(i){l.setParams({text_color:i})},get:function(){return j||d()},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(i){l.setParams({is_visible:i})},get:function(){return h},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return A},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(i){l.setParams({is_active:i})},get:function(){return c},enumerable:!0}),Object.defineProperty(l,"hasShineEffect",{set:function(i){l.setParams({has_shine_effect:i})},get:function(){return T},enumerable:!0}),t||Object.defineProperty(l,"position",{set:function(i){l.setParams({position:i})},get:function(){return N},enumerable:!0});var E=null;u.onEvent(o,je);var g=null;if(W.tgWebAppDebug){g=document.createElement("tg-bottom-button");var P={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var V in P)g.style[V]=P[V];S.appendChild(g),g.addEventListener("click",je,!1),g._bottomButton=l,ye[e]=g}function je(){c&&f(n)}function Re(){var i=l.color,R=l.textColor;if(h){var K={is_visible:!0,is_active:c,is_progress_visible:A,text:ie,color:i,text_color:R,has_shine_effect:T&&c&&!A};t||(K.position=N)}else var K={is_visible:!1};return K}function ut(i){return typeof i>"u"&&(i=Re()),JSON.stringify(i)}function We(){var i=Re(),R=ut(i);E!==R&&(E=R,u.postEvent(r,!1,i),W.tgWebAppDebug&&pt(i))}function pt(i){i.is_visible?(g.style.display="block",g.style.opacity=i.is_active?"1":"0.8",g.style.cursor=i.is_active?"pointer":"auto",g.disabled=!i.is_active,g.innerText=i.text,g.className=i.has_shine_effect?"shine":"",g.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+i.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",g.style.backgroundColor=i.color,g.style.color=i.text_color):g.style.display="none",Oe()}function ct(i){if(typeof i.text<"u"){var R=p(i.text);if(!R.length)throw console.error("[Telegram.WebApp] Bottom button text is required",i.text),Error("WebAppBottomButtonParamInvalid");if(R.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",R),Error("WebAppBottomButtonParamInvalid");ie=R}if(typeof i.color<"u")if(i.color===!1||i.color===null)ae=!1;else{var K=G(i.color);if(!K)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",i.color),Error("WebAppBottomButtonParamInvalid");ae=K}if(typeof i.text_color<"u")if(i.text_color===!1||i.text_color===null)j=!1;else{var Ue=G(i.text_color);if(!Ue)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",i.text_color),Error("WebAppBottomButtonParamInvalid");j=Ue}if(typeof i.is_visible<"u"){if(i.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");h=!!i.is_visible}if(typeof i.has_shine_effect<"u"&&(T=!!i.has_shine_effect),!t&&typeof i.position<"u"){if(i.position!="left"&&i.position!="right"&&i.position!="top"&&i.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",i.position),Error("WebAppBottomButtonParamInvalid");N=i.position}return typeof i.is_active<"u"&&(c=!!i.is_active),We(),l}return l.setText=function(i){return l.setParams({text:i})},l.onClick=function(i){return w(n,i),l},l.offClick=function(i){return B(n,i),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(i){return c=!!i,A=!0,We(),l},l.hideProgress=function(){return l.isActive||(c=!0),A=!1,We(),l},l.setParams=ct,l},$e=qe("main"),Xe=qe("secondary"),Me=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(c){h({is_visible:c})},get:function(){return e},enumerable:!0});var r=null;u.onEvent("settings_button_pressed",o);function o(){f("settingsButtonClicked")}function n(){return{is_visible:e}}function b(c){return typeof c>"u"&&(c=n()),JSON.stringify(c)}function m(){return v("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+_),!1)}function d(){var c=n(),T=b(c);r!==T&&(r=T,u.postEvent("web_app_setup_settings_button",!1,c))}function h(c){return m()&&(typeof c.is_visible<"u"&&(e=!!c.is_visible),d()),t}return t.onClick=function(c){return m()&&w("settingsButtonClicked",c),t},t.offClick=function(c){return m()&&B("settingsButtonClicked",c),t},t.show=function(){return h({is_visible:!0})},t.hide=function(){return h({is_visible:!1})},t}(),Ze=function(){var e={};function t(r){if(!v("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+_),e;if(r.type=="impact"){if(r.impact_style!="light"&&r.impact_style!="medium"&&r.impact_style!="heavy"&&r.impact_style!="rigid"&&r.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(r.type=="notification"){if(r.notification_type!="error"&&r.notification_type!="success"&&r.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(r.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return u.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(r){return t({type:"impact",impact_style:r})},e.notificationOccurred=function(r){return t({type:"notification",notification_type:r})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),Ye=function(){var e={};function t(r,o,n){if(!v("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+_),Error("WebAppMethodUnsupported");return Ae(r,o,n),e}return e.setItem=function(r,o,n){return t("saveStorageValue",{key:r,value:o},n)},e.getItem=function(r,o){return e.getItems([r],o?function(n,b){n?o(n):o(null,b[r])}:null)},e.getItems=function(r,o){return t("getStorageValues",{keys:r},o)},e.removeItem=function(r,o){return e.removeItems([r],o)},e.removeItems=function(r,o){return t("deleteStorageValues",{keys:r},o)},e.getKeys=function(r){return t("getStorageKeys",{},r)},e}(),De=function(){var e=!1,t=!1,r="unknown",o=!1,n=!1,b=!1,m="",d={};Object.defineProperty(d,"isInited",{get:function(){return e},enumerable:!0}),Object.defineProperty(d,"isBiometricAvailable",{get:function(){return e&&t},enumerable:!0}),Object.defineProperty(d,"biometricType",{get:function(){return r||"unknown"},enumerable:!0}),Object.defineProperty(d,"isAccessRequested",{get:function(){return o},enumerable:!0}),Object.defineProperty(d,"isAccessGranted",{get:function(){return o&&n},enumerable:!0}),Object.defineProperty(d,"isBiometricTokenSaved",{get:function(){return b},enumerable:!0}),Object.defineProperty(d,"deviceId",{get:function(){return m||""},enumerable:!0});var h={callbacks:[]},c=!1,T=!1,A=!1;u.onEvent("biometry_info_received",M),u.onEvent("biometry_auth_requested",ie),u.onEvent("biometry_token_updated",ae);function M(l,E){if(e=!0,E.available?(t=!0,r=E.type||"unknown",E.access_requested?(o=!0,n=!!E.access_granted,b=!!E.token_saved):(o=!1,n=!1,b=!1)):(t=!1,r="unknown",o=!1,n=!1,b=!1),m=E.device_id||"",h.callbacks.length>0)for(var g=0;g<h.callbacks.length;g++){var P=h.callbacks[g];P()}if(c){var V=c;c=!1,V.callback&&V.callback(n)}f("biometricManagerUpdated")}function ie(l,E){var g=E.status=="authorized",P=E.token||"";if(T){var V=T;T=!1,V.callback&&V.callback(g,g?P:null)}f("biometricAuthRequested",g?{isAuthenticated:!0,biometricToken:P}:{isAuthenticated:!1})}function ae(l,E){var g=!1;if(t&&o&&(E.status=="updated"?(b=!0,g=!0):E.status=="removed"&&(b=!1,g=!0)),A){var P=A;A=!1,P.callback&&P.callback(g)}f("biometricTokenUpdated",{isUpdated:g})}function j(){return v("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+_),!1)}function N(){if(!e)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return d.init=function(l){return!j()||e||(l&&h.callbacks.push(l),u.postEvent("web_app_biometry_get_info",!1)),d},d.requestAccess=function(l,E){if(!j())return d;if(N(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(c)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var g={};if(typeof l.reason<"u"){var P=p(l.reason);if(P.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",P),Error("WebAppBiometricRequestAccessParamInvalid");P.length>0&&(g.reason=P)}return c={callback:E},u.postEvent("web_app_biometry_request_access",!1,g),d},d.authenticate=function(l,E){if(!j())return d;if(N(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!n)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(T)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var g={};if(typeof l.reason<"u"){var P=p(l.reason);if(P.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",P),Error("WebAppBiometricRequestAccessParamInvalid");P.length>0&&(g.reason=P)}return T={callback:E},u.postEvent("web_app_biometry_request_auth",!1,g),d},d.updateBiometricToken=function(l,E){if(!j())return d;if(l=l||"",l.length>1024)throw console.error("[Telegram.WebApp] Token is too long",l),Error("WebAppBiometricManagerTokenInvalid");if(N(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!n)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(A)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return A={callback:E},u.postEvent("web_app_biometry_update_token",!1,{token:l}),d},d.openSettings=function(){if(!j())return d;if(N(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!o)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return n?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),d):(u.postEvent("web_app_biometry_open_settings",!1),d)},d}(),te={};function et(e,t){if(t.slug&&te[t.slug]){var r=te[t.slug];delete te[t.slug],r.callback&&r.callback(t.status),f("invoiceClosed",{url:r.url,status:t.status})}}var re=!1;function tt(e,t){if(re){var r=re;re=!1;var o=null;typeof t.button_id<"u"&&(o=t.button_id),r.callback&&r.callback(o),f("popupClosed",{button_id:o})}}var H=!1;function rt(e,t){if(H){var r=H,o=null;typeof t.data<"u"&&(o=t.data),r.callback&&r.callback(o)&&(H=!1,u.postEvent("web_app_close_scan_qr_popup",!1)),f("qrTextReceived",{data:o})}}function ot(e,t){H=!1,f("scanQrPopupClosed")}function nt(e,t){if(t.req_id&&O[t.req_id]){var r=O[t.req_id];delete O[t.req_id];var o=null;typeof t.data<"u"&&(o=t.data),r.callback&&r.callback(o),f("clipboardTextReceived",{data:o})}}var oe=!1;function it(e,t){if(oe){var r=oe;oe=!1,r.callback&&r.callback(t.status=="allowed"),f("writeAccessRequested",{status:t.status})}}function at(e,t){var r,o,n=0,b=function(){Ae("getRequestedContact",{},function(d,h){h&&h.length?(clearTimeout(o),e(h)):(n+=50,r=setTimeout(b,n))})},m=function(){clearTimeout(r),e("")};o=setTimeout(m,t),b()}var ne=!1;function st(e,t){if(ne){var r=ne;ne=!1;var o=t.status=="sent",n={status:t.status};o?at(function(b){if(b&&b.length){n.response=b,n.responseUnsafe=x.urlParseQueryString(b);for(var m in n.responseUnsafe){var d=n.responseUnsafe[m];try{(d.substr(0,1)=="{"&&d.substr(-1)=="}"||d.substr(0,1)=="["&&d.substr(-1)=="]")&&(n.responseUnsafe[m]=JSON.parse(d))}catch{}}}r.callback&&r.callback(o,n),f("contactRequested",n)},3e3):(r.callback&&r.callback(o,n),f("contactRequested",n))}}function lt(e,t){if(t.req_id&&O[t.req_id]){var r=O[t.req_id];delete O[t.req_id];var o=null,n=null;typeof t.result<"u"&&(o=t.result),typeof t.error<"u"&&(n=t.error),r.callback&&r.callback(n,o)}}function Ae(e,t,r){if(!v("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+_),Error("WebAppMethodUnsupported");var o=Ee(16),n={req_id:o,method:e,params:t||{}};O[o]={callback:r},u.postEvent("web_app_invoke_custom_method",!1,n)}window.Telegram||(window.Telegram={}),Object.defineProperty(a,"initData",{get:function(){return U},enumerable:!0}),Object.defineProperty(a,"initDataUnsafe",{get:function(){return q},enumerable:!0}),Object.defineProperty(a,"version",{get:function(){return _},enumerable:!0}),Object.defineProperty(a,"platform",{get:function(){return se},enumerable:!0}),Object.defineProperty(a,"colorScheme",{get:function(){return J},enumerable:!0}),Object.defineProperty(a,"themeParams",{get:function(){return y},enumerable:!0}),Object.defineProperty(a,"isExpanded",{get:function(){return Te},enumerable:!0}),Object.defineProperty(a,"viewportHeight",{get:function(){return(X===!1?window.innerHeight:X)-C},enumerable:!0}),Object.defineProperty(a,"viewportStableHeight",{get:function(){return(Z===!1?window.innerHeight:Z)-C},enumerable:!0}),Object.defineProperty(a,"isClosingConfirmationEnabled",{set:function(e){Ne(e)},get:function(){return ge},enumerable:!0}),Object.defineProperty(a,"isVerticalSwipesEnabled",{set:function(e){Ve(e)},get:function(){return ve},enumerable:!0}),Object.defineProperty(a,"headerColor",{set:function(e){He(e)},get:function(){return Le()},enumerable:!0}),Object.defineProperty(a,"backgroundColor",{set:function(e){Qe(e)},get:function(){return Be()},enumerable:!0}),Object.defineProperty(a,"bottomBarColor",{set:function(e){Je(e)},get:function(){return ee()},enumerable:!0}),Object.defineProperty(a,"BackButton",{value:Ke,enumerable:!0}),Object.defineProperty(a,"MainButton",{value:$e,enumerable:!0}),Object.defineProperty(a,"SecondaryButton",{value:Xe,enumerable:!0}),Object.defineProperty(a,"SettingsButton",{value:Me,enumerable:!0}),Object.defineProperty(a,"HapticFeedback",{value:Ze,enumerable:!0}),Object.defineProperty(a,"CloudStorage",{value:Ye,enumerable:!0}),Object.defineProperty(a,"BiometricManager",{value:De,enumerable:!0}),a.setHeaderColor=function(e){a.headerColor=e},a.setBackgroundColor=function(e){a.backgroundColor=e},a.setBottomBarColor=function(e){a.bottomBarColor=e},a.enableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!0},a.disableClosingConfirmation=function(){a.isClosingConfirmationEnabled=!1},a.enableVerticalSwipes=function(){a.isVerticalSwipesEnabled=!0},a.disableVerticalSwipes=function(){a.isVerticalSwipesEnabled=!1},a.isVersionAtLeast=function(e){return v(e)},a.onEvent=function(e,t){w(e,t)},a.offEvent=function(e,t){B(e,t)},a.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(Ge(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");u.postEvent("web_app_data_send",!1,{data:e})},a.switchInlineQuery=function(e,t){if(!v("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+_),Error("WebAppMethodUnsupported");if(!W.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(e=e||"",e.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");var r=[];if(t){if(!Array.isArray(t))throw console.error("[Telegram.WebApp] Choose chat types should be an array",t),Error("WebAppInlineChooseChatTypesInvalid");for(var o={users:1,bots:1,groups:1,channels:1},n=0;n<t.length;n++){var b=t[n];if(!o[b])throw console.error("[Telegram.WebApp] Choose chat type is invalid",b),Error("WebAppInlineChooseChatTypeInvalid");o[b]!=2&&(o[b]=2,r.push(b))}}u.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:r})},a.openLink=function(o,t){var r=document.createElement("A");if(r.href=o,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",o),Error("WebAppTgUrlInvalid");var o=r.href;if(t=t||{},v("6.1")){var n={url:o};v("6.4")&&t.try_instant_view&&(n.try_instant_view=!0),v("7.6")&&t.try_browser&&(n.try_browser=t.try_browser),u.postEvent("web_app_open_link",!1,n)}else window.open(o,"_blank")},a.openTelegramLink=function(e){var t=document.createElement("A");if(t.href=e,t.protocol!="http:"&&t.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(t.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var r=t.pathname+t.search;Q||v("6.1")?u.postEvent("web_app_open_tg_link",!1,{path_full:r}):location.href="https://t.me"+r},a.openInvoice=function(e,t){var r=document.createElement("A"),o,n;if(r.href=e,r.protocol!="http:"&&r.protocol!="https:"||r.hostname!="t.me"||!(o=r.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(n=o[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!v("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+_),Error("WebAppMethodUnsupported");if(te[n])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");te[n]={url:e,callback:t},u.postEvent("web_app_open_invoice",!1,{slug:n})},a.showPopup=function(e,t){if(!v("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+_),Error("WebAppMethodUnsupported");if(re)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var r="",o="",n=[],b={},m={};if(typeof e.title<"u"){if(r=p(e.title),r.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",r),Error("WebAppPopupParamInvalid");r.length>0&&(m.title=r)}if(typeof e.message<"u"&&(o=p(e.message)),!o.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(o.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",o),Error("WebAppPopupParamInvalid");if(m.message=o,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var d=0;d<e.buttons.length;d++){var h=e.buttons[d],c={},T="";if(typeof h.id<"u"&&(T=h.id.toString(),T.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",T),Error("WebAppPopupParamInvalid");c.id=T;var A=h.type;if(typeof A>"u"&&(A="default"),c.type=A,!(A=="ok"||A=="close"||A=="cancel"))if(A=="default"||A=="destructive"){var M="";if(typeof h.text<"u"&&(M=p(h.text)),!M.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+A,h.text),Error("WebAppPopupParamInvalid");if(M.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",M),Error("WebAppPopupParamInvalid");c.text=M}else throw console.error("[Telegram.WebApp] Popup button type is invalid",A),Error("WebAppPopupParamInvalid");n.push(c)}}else n.push({id:"",type:"close"});if(n.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(n.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");m.buttons=n,re={callback:t},u.postEvent("web_app_open_popup",!1,m)},a.showAlert=function(e,t){a.showPopup({message:e},t?function(){t()}:null)},a.showConfirm=function(e,t){a.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(r){t(r=="ok")}:null)},a.showScanQrPopup=function(e,t){if(!v("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+_),Error("WebAppMethodUnsupported");if(H)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var r="",o={};if(typeof e.text<"u"){if(r=p(e.text),r.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",r),Error("WebAppScanQrPopupParamInvalid");r.length>0&&(o.text=r)}H={callback:t},u.postEvent("web_app_open_scan_qr_popup",!1,o)},a.closeScanQrPopup=function(){if(!v("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+_),Error("WebAppMethodUnsupported");H=!1,u.postEvent("web_app_close_scan_qr_popup",!1)},a.readTextFromClipboard=function(e){if(!v("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+_),Error("WebAppMethodUnsupported");var t=Ee(16),r={req_id:t};O[t]={callback:e},u.postEvent("web_app_read_text_from_clipboard",!1,r)},a.requestWriteAccess=function(e){if(!v("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+_),Error("WebAppMethodUnsupported");if(oe)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");oe={callback:e},u.postEvent("web_app_request_write_access")},a.requestContact=function(e){if(!v("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+_),Error("WebAppMethodUnsupported");if(ne)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");ne={callback:e},u.postEvent("web_app_request_phone")},a.shareToStory=function(e,t){if(t=t||{},!v("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+_),Error("WebAppMethodUnsupported");var r=document.createElement("A");if(r.href=e,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var o={};if(o.media_url=r.href,typeof t.text<"u"){var n=p(t.text);if(n.length>2048)throw console.error("[Telegram.WebApp] Text is too long",n),Error("WebAppShareToStoryParamInvalid");n.length>0&&(o.text=n)}if(typeof t.widget_link<"u"){if(t.widget_link=t.widget_link||{},r.href=t.widget_link.url,r.protocol!="http:"&&r.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var b={url:r.href};if(typeof t.widget_link.name<"u"){var m=p(t.widget_link.name);if(m.length>48)throw console.error("[Telegram.WebApp] Link name is too long",m),Error("WebAppShareToStoryParamInvalid");m.length>0&&(b.name=m)}o.widget_link=b}u.postEvent("web_app_share_to_story",!1,o)},a.invokeCustomMethod=function(e,t,r){Ae(e,t,r)},a.ready=function(){u.postEvent("web_app_ready")},a.expand=function(){u.postEvent("web_app_expand")},a.close=function(e){e=e||{};var t={};v("7.6")&&e.return_back&&(t.return_back=!0),u.postEvent("web_app_close",!1,t)},window.Telegram.WebApp=a,he(),_e(),we(),be(),W.tgWebAppShowSettings&&Me.show(),window.addEventListener("resize",$),Q&&document.addEventListener("click",s),u.onEvent("theme_changed",fe),u.onEvent("viewport_changed",pe),u.onEvent("invoice_closed",et),u.onEvent("popup_closed",tt),u.onEvent("qr_text_received",rt),u.onEvent("scan_qr_popup_closed",ot),u.onEvent("clipboard_text_received",nt),u.onEvent("write_access_requested",it),u.onEvent("phone_requested",st),u.onEvent("custom_method_invoked",lt),u.postEvent("web_app_request_theme"),u.postEvent("web_app_request_viewport")}();
